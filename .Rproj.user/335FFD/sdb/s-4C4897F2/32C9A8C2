{
    "contents" : "######################################################################\n#getWeedData: inquery Pesticidedata from SKEP database\n######################################################################\n#'\n#' Get weed infestation data\n#'\n#' @param x is mySQL data\n#'\n#' @details x\n#' \n#'\n#' @export x\n#'\n#' @return\n#' Fertilizer information table (dataframe)\n#'\n#' @examples a value x\n#' @keywords\n#' MySQL\n#'\n\ngetWeedData <- function(x){\n        \n        weed.rank <- tbl(x,\"weed_rank\") %>% \n                collect() %>%\n                select(-id_weed_rank, -main_weed ) %>%\n                transform(weed_type = as.factor(weed_type))\n        \n        # save the list of weed type\n        weed.type <- collect(tbl(x,\"weed_type\"))$weed_type\n        \n        # rename weed type codes to weed type names\n        levels(weed.rank$weed_type) <- weed.type\n        \n        # make data more tidy\n        weed.rank.df <- spread(weed.rank, weed_type, data)\n        #================================================\n        weed.main <- tbl(mydb, \"weed_main\") %>%\n                select(-id_weed_main) %>%\n                collect() %>%\n                transform(area = as.factor(area))\n        \n        # rename sampling area from A, B, C to 1, 2, 3\n        levels(weed.main$area) <- c(\"1\", \"2\", \"3\")\n        # save to data frame of weed species lists\n        weed.list <- collect(tbl(mydb,\"weed_list\"))\n        \n        # combine the main weed spcies with weed main species codes\n        all.weed <- left_join(weed.main, weed.list, by = \"weed_list_id\" )\n        \n        # combine weed ranking with main weed species\n        left_join(weed.rank.df, all.weed, by = c(\"id_ci\" , \"area\"))  \n        \n}\n\n\n\n\n\n\n",
    "created" : 1433121289399.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "54981818",
    "id" : "32C9A8C2",
    "lastKnownWriteTime" : 1433122329,
    "path" : "~/GitHub/SKEP/R/getWeedData.R",
    "project_path" : "R/getWeedData.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}